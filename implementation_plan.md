# 実装計画書: UI機能改善およびコード整理

## 現状の分析
- `src/ui/menu.ts` 内に、現在使用されていないと考えられる `adjustMenuPosition` 関数が存在します（`adjustMenuPositionSafe` が代わりに使用されています）。
- メニューの右端へのはみ出し防止ロジックは `adjustMenuPositionSafe` に実装されていますが、下端（ボトム）へのはみ出しチェックは含まれていません。

## 目的
1. コードベースの健全性維持（デッドコードの削除）。
2. UIのユーザビリティ向上（メニューが画面外に見切れるのを全方向で防ぐ）。

## 実行ステップ

### 1. コード整理 (Refactoring)
- **対象ファイル**: `src/ui/menu.ts`
- **内容**: 未使用の `adjustMenuPosition` 関数を削除し、コードの見通しを良くします。

### 2. 機能強化 (Enhancement)
- **対象ファイル**: `src/ui/menu.ts` -> `adjustMenuPositionSafe` 関数
- **内容**:
    - `rect.bottom > windowHeight` のチェックを追加します。
    - 下端からはみ出す場合、メニューの `top` を調整する（例: 親要素の上方向に展開するなど）か、スクロール可能な最大高さ制限(`max-height`)を設定するロジックを検討・実装します。

### 3. UI改善 (UI Improvements)
- **対象ファイル**: `index.html`
- **内容**:
    - 「段落スタイル」>「配置」メニュー内の「左」「中」「右」テキストボタンを、視覚的なSVGアイコン（バー表示）に変更します。
    - ユーザー提供のデザイン（太めの線で配置を表現）に合わせます。
    - 「画像タイトル」ダイアログ内のラジオボタンとラベルのレイアウト崩れを修正します。
    - 同ダイアログ内の文言を「標準」→「本文サイズ」、「小サイズ(mini-p)」→「サブテキスト」に変更します。

### 4. 動作検証 (Verification)
- ブラウザにて以下の動作を確認します。
    - ウィンドウ幅を狭めた際の右端折り返し動作。
    - ウィンドウ高さを狭めた際、または画面下部にある要素のメニューを開いた際の下端位置調整。
    - 文字揃えアイコンが正しく表示され、崩れがないこと。
    - 画像タイトルダイアログのレイアウトと文言が正しいこと。
