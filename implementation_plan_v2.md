# 開発計画書: 機能強化とUI刷新

## 概要
エディタのユーザビリティを飛躍的に高め、プロ仕様の執筆環境へと進化させるための段階的実装計画です。

## フェーズ 1: 環境のクリーンアップとレイアウト基盤
**目的**: 開発の妨げとなる古い機能を削除し、作業領域を最大化・最適化する。
1.  **ソースコードビューの完全廃止**
    - `index.html` から `<div id="source">` などの関連要素を削除。
    - CSSのグリッドレイアウトを修正し、エディタ部分を中央揃えにする。
    - `src/main.ts`, `src/editor/io.ts`, `src/registry.ts` から `syncToSource` 関連の監視ロジックを全削除。
2.  **UIレイアウトの極大化 (Sticky Header & Responsive)**
    - ツールバー (`#app-header`) を画面上部に常時固定 (`sticky/fixed`)。
    - ウィンドウ幅やズーム倍率に関わらず、A4用紙 (`.page`) が常に快適な位置（中央）に表示されるよう、フレックスボックス/グリッドを調整。
    - 背景色やシャドウを調整し、モダンで没入感のある「極まったUI」への第一歩とする。

## フェーズ 2: エディタ・コアロジックの進化
**目的**: 紙のような執筆体験（ページネーション）と、システム連携（AI/構造化）を強化する。
1.  **自動改ページ機能 (Dynamic Pagination)**
    - テキスト入力や改行時に要素の座標を監視。
    - コンテンツが設定された下余白 (`margin-bottom`) を超えた場合、自動的に次ページを生成し、以降のノードを移動させるロジックを実装。
    - キャレット（カーソル）の追従処理。
2.  **番号表示とAIメタデータの制御**
    - ページ番号・段落番号の表示/非表示を切り替えるトグルUIの実装。
    - GPT等がHTML構造を理解しやすくするための「メタガイド（不可視のセマンティックタグやコメント）」をDOMに自動挿入する処理の追加。

## フェーズ 3: ナビゲーション機能の実装
**目的**: 長文ドキュメントでも迷子にならず、目的の場所に即座に移動できるようにする。
1.  **ページサムネイル一覧 (Page Navigator)**
    - 画面左側（またはトグル式ドロワー）に、全ページのサムネイルリストを表示。
    - クリックで該当ページへスムーズスクロール。
2.  **段落ジャンプ機能**
    - `Ctrl+J` (仮) 等で入力窓を出し、「3-5」のようなID入力で該当箇所へフォーカス移動する機能。

## フェーズ 4: 堅牢性とエクスポート
**目的**: 成果物を安全に保存・出力できるようにする。
1.  **PDF出力 (Print Layout Optimization)**
    - ブラウザの印刷機能を用いたPDF化において、画面上の見た目（WYSIWYG）を完全に再現するための `@media print` CSSの徹底調整。
    - 不要なUIパーツ（ツールバー等）の非表示化。
2.  **未保存時の保護**
    - 編集内容がある状態でブラウザを閉じようとした際に、警告ダイアログ（`beforeunload`）を表示。
