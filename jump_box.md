## 概要
これは、解決困難な要件を効率的に解決するためのファイルである。要件に関する重要事項を随時追記修正することで、AIが状況を動的に把握しやすくするとともに、他のモデルも即座に状況を把握できるようにする。

内容は以下の通りとする。
1.未解決要件、2.未解決要件に関するコード変更履歴（毎回、分析結果・方針・変更内容を詳細に記述する）3.分析中に気づいた重要ポイント（試してだめだったこと、仮設、制約条件等...）、4.解決済み要件とその解決方法、5.要件に関連する全ファイルのファイル構成、6.要件に関連する技術スタック、7.要件に関する機能の動作原理（依存関係含む）

## ワークフロー

### 現状把握と分析
まず、1を確認して未解決要件を把握する。
その後、2～7を参考にしつつ、コードベースを分析して、現状の問題点を考える。
同時に、3を更新する。

### 5～7の更新
分析を踏まえて、5～7を更新する。
***常に、最新の要件に関連する記述を行い、最新の要件に関係のない記述は削除すること。***

### コード編集作業
次に、実際に要件を満たすためにコーディングを行う。途中、適宜3を更新する。

### 作業終了後
作業後は、ユーザーから、フィードバックを受けたのち、ユーザーの指示に従って、1,4を更新する。
***勝手に1,4を編集しないこと。***

----------------------------------------
# 以下、AIが自動的に更新する部分
----------------------------------------

## 1. 未解決要件
・ジャンプ用入力ボックスのスタイリングをv1と同じにする。
・二段、全部同じフォントサイズ、キャレットは、ボックスの一番左のみに入るようにする。
（現状は（例）の先頭にキャレットが挿入されてしまい、期待通りではない。）
・v1のスタイリングコードを積極的に参考にすること。

## 2. 未解決要件に関するコード変更履歴

### 変更1: 2025-12-28
**分析結果:**
v2のジャンプウィジェットはv1と異なる構造になっていた。
- v1: 縦2段構造（1段目:ラベル、2段目:input）
- v2: 横並び構造（左:ラベル2行、右:input）

**方針:**
v1のHTML構造とCSSを参考に、v2を縦2段構造に修正

**変更内容:**
1. `src/v2/components/features/Toolbar.tsx` (182-204行)
   - `flex items-center` → `flex flex-col` に変更（横並び→縦並び）
   - ラベルをspan2行からlabel要素1行に変更
   - inputにid属性追加、labelのfor属性でリンク
   - フォントサイズをv1準拠に調整（ラベル7pt、入力11pt）
   - 幅を220px固定に変更

2. `src/v2/styles/index.css`
   - プレースホルダースタイルを追加（7pt、#999）

## 3. 分析中に気づいた重要ポイント
- v1のラベルには`cursor: text`が設定されており、ラベルをクリックするとinputにフォーカスが移る
- v1では`for`属性でlabelとinputを関連付けている
- プレースホルダーのフォントサイズはCSSの::placeholder擬似要素で設定する必要がある
- Tailwindのインラインスタイルでは::placeholderを直接設定できないため、CSSファイルで対応

## 4. 解決済み要件とその解決方法

## 5. 要件に関連する全ファイルのファイル構成
- **v1 (参考元)**
  - `index.html` (353-360行): ジャンプウィジェットのHTML構造
  - `src/v1/styles/ui.css` (1031-1084行): ジャンプウィジェットのCSS
- **v2 (修正対象)**
  - `src/v2/components/features/Toolbar.tsx` (182-199行): ジャンプウィジェットのReactコンポーネント

## 6. 要件に関連する技術スタック
- v1: Vanilla HTML/CSS/TypeScript
- v2: React + Tiptap + Tailwind CSS

## 7. 要件に関する機能の動作原理
### v1のジャンプウィジェット構造
```html
<div class="jump-widget">
  <label for="toolbar-jump-input">ジャンプ機能　[ ctrl+J ]</label>
  <input type="text" id="toolbar-jump-input" placeholder='(例：1-1)…へジャンプ'>
</div>
```
- flex-direction: column（縦並び）
- 1行目: ラベル（font-size: 7pt、color: #999、cursor: text）
- 2行目: input（font-size: 11pt、border無し、背景透明）
- ラベルにcursor: textがあるため、ラベルクリックでinputにフォーカス

### v2の現状の問題点
```jsx
<div className="... flex items-center ...">  {/* 横並び - 問題! */}
  <div className="flex flex-col ...">
    <span>ジャンプ機能</span>  
    <span>[ ctrl+J ]</span>    
  </div>
  <input placeholder="(例：1-1)…へジャンプ" />  
</div>
```
1. 横並び構造でラベルとinputが並んでいる（v1は縦並び）
2. ラベルをクリックしてもinputにフォーカスしない（label要素ではなくspan）
3. フォントサイズがv1と異なる

