# 画像ロジック仕様書

---

## 1. 未解決要件

### 1.1 キャレット位置の微調整
- **要件**: 画像右辺キャレットを画像右辺から離れすぎているので、画像右辺から1.5pt右の位置に配置したい
- **現状**: `letter-spacing: 1.5pt` を画像段落に適用中。コンテナを一つの文字として扱い、直後のキャレットとの間隔を確保することで解決を試行中。

---

## 2. 未解決要件に関するコード変更履歴

### 2025-12-28 18:40 - キャレット位置調整（1.5pt右）の改善
- **分析結果**:
  - `margin` や `padding` では、ブラウザがキャレットを内容物（img）の端に吸着させてしまう傾向がある
  - `letter-spacing` を親の段落に適用すると、インラインブロック要素である画像コンテナの直後に正確な空白が生成される
- **方針**:
  - 画像段落のみに `letter-spacing: 1.5pt` を適用
- **変更内容**:
  ```css
  .page-inner p:has(> .image-container) {
    letter-spacing: 1.5pt;
  }
  ```

### 2025-12-28 18:35 - サブテキストタイトルのスタイル修正 ✅
- **分析結果**: 親要素の `font-size: 0` により、`em` 指定が 0 になっていた
- **方針**: `calc(11pt * 0.67)` で固定値指定
- **結果**: ✅ 正常動作確認済み