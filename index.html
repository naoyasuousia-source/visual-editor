<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Visual HTML Editor</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div id="left">
    <div id="toolbar">
      <div class="file-menu">
        <button type="button" class="file-trigger">ファイル ▾</button>
        <div class="file-dropdown" role="menu" aria-label="File options">
          <button type="button" data-action="save">保存</button>
          <button type="button" data-action="save-as">名前を付けて保存</button>
          <button type="button" data-action="overwrite">上書き保存</button>
          <button type="button" data-action="open">ファイルを開く</button>
          <button type="button" data-action="print">PDFとして出力</button>
          <div class="nested-dropdown">
            <button type="button" class="nested-trigger" aria-haspopup="menu" aria-expanded="false">ハイパーリンク</button>
            <div class="nested-dropdown-menu" role="menu">
              <button type="button" data-action="add-link-destination">リンク先に追加</button>
              <button type="button" data-action="create-link">リンクを生成</button>
              <button type="button" data-action="remove-link">リンクを削除</button>
            </div>
          </div>
          <div class="nested-dropdown">
            <button type="button" class="nested-trigger" aria-haspopup="menu" aria-expanded="false">画像を挿入</button>
            <div class="nested-dropdown-menu" role="menu">
              <button type="button" data-action="insert-image-dropbox">dropboxから挿入</button>
              <button type="button" data-action="insert-image-web">web上の画像を挿入</button>
            </div>
          </div>
          <div class="nested-dropdown">
            <button type="button" class="nested-trigger" aria-haspopup="menu" aria-expanded="false">余白</button>
            <div class="nested-dropdown-menu" role="menu">
              <button type="button" data-action="page-margin" data-size="s">S</button>
              <button type="button" data-action="page-margin" data-size="m">M</button>
              <button type="button" data-action="page-margin" data-size="l">L</button>
            </div>
          </div>
        </div>
      </div>
      <div class="view-menu">
        <button type="button" class="view-trigger">表示 ▾</button>
        <div class="view-dropdown" role="menu" aria-label="View options">
          <label class="menu-item-label">
            <input type="checkbox" data-action="toggle-page-numbers" checked> ページ番号
          </label>
          <label class="menu-item-label">
            <input type="checkbox" data-action="toggle-para-numbers" checked> 段落番号
          </label>
        </div>
      </div>
      <button type="button" data-action="bold">B</button>
      <button type="button" data-action="italic">I</button>
      <button type="button" data-action="underline">U</button>
      <button type="button" data-action="strike">S</button>
      <!-- Jump Input Moved -->
      <div class="highlight-control">
        <button type="button" data-action="highlight" aria-expanded="false">HL</button>
        <div class="highlight-palette" role="group" aria-label="ハイライトカラー">
          <button type="button" class="highlight-color-button" data-action="highlight-color" data-color="#FFFF00"
            style="color:#FFFF00" title="黄色" aria-label="黄色"></button>
          <button type="button" class="highlight-color-button" data-action="highlight-color" data-color="#FFB7B7"
            style="color:#FFB7B7" title="薄ピンク" aria-label="薄ピンク"></button>
          <button type="button" class="highlight-color-button" data-action="highlight-color" data-color="#B7E1FF"
            style="color:#B7E1FF" title="薄青" aria-label="薄青"></button>
          <button type="button" class="highlight-color-button" data-action="highlight-color" data-color="#C4F0C5"
            style="color:#C4F0C5" title="薄緑" aria-label="薄緑"></button>
          <button type="button" class="highlight-reset-button" data-action="highlight-reset"
            title="ハイライトを取り消す">取消</button>
        </div>
      </div>
      <button type="button" data-action="superscript" title="上付き"><svg viewBox="0 0 24 24" width="20" height="20"
          fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 20L14 8M14 20L5 8" /><text x="15" y="8" font-size="11" stroke="none" fill="currentColor"
            font-weight="bold">2</text>
        </svg></button>
      <button type="button" data-action="subscript" title="下付き"><svg viewBox="0 0 24 24" width="20" height="20"
          fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 18L14 6M14 18L5 6" /><text x="15" y="23" font-size="11" stroke="none" fill="currentColor"
            font-weight="bold">2</text>
        </svg></button>
      <div class="font-chooser" id="font-chooser">
        <button type="button" class="font-chooser-trigger" aria-haspopup="true" aria-expanded="false">Font ▾</button>
        <div class="font-chooser-panel" role="menu" aria-label="フォント操作">
          <div class="font-submenu" data-submenu="block-element">
            <button type="button" class="font-submenu-trigger" aria-haspopup="true" aria-expanded="false"
              title="ブロック要素"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                stroke-width="2">
                <path d="M4 6h16M4 12h16M4 18h10" />
              </svg></button>
            <div class="font-submenu-panel" role="menu">
              <div class="spacing-buttons">
                <button type="button" class="spacing-button" data-action="block-element" data-tag="h1"
                  title="見出し１">見出し１</button>
                <button type="button" class="spacing-button" data-action="block-element" data-tag="h2"
                  title="見出し２">見出し２</button>
                <button type="button" class="spacing-button" data-action="block-element" data-tag="h3"
                  title="見出し３">見出し３</button>
                <button type="button" class="spacing-button" data-action="block-element" data-tag="p"
                  title="本文">本文</button>
                <button type="button" class="spacing-button" data-action="block-element" data-tag="mini-p"
                  title="サブテキスト">サブテキスト</button>
              </div>
            </div>
          </div>
          <div class="font-submenu" data-submenu="font-color">
            <button type="button" class="font-submenu-trigger" aria-haspopup="true" aria-expanded="false"
              title="フォントカラー"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                stroke-width="2">
                <path d="M12 3L5 20h2l1-4h8l1 4h2L12 3zm-3 11l3-8 3 8H9z" />
                <path d="M22 20h-4H6H2" stroke-width="3" />
              </svg></button>
            <div class="font-submenu-panel" role="menu">
              <div class="color-palette" role="group" aria-label="フォントカラー">
                <button type="button" class="color-default-button" data-action="font-color-default" title="デフォルトカラー"
                  aria-label="デフォルトカラー">デフォルト</button>
                <button type="button" class="color-swatch-button" data-action="font-color-swatch" data-color="#D92C2C"
                  style="color:#D92C2C" title="#D92C2C" aria-label="#D92C2C"></button>
                <button type="button" class="color-swatch-button" data-action="font-color-swatch" data-color="#E67F22"
                  style="color:#E67F22" title="#E67F22" aria-label="#E67F22"></button>
                <button type="button" class="color-swatch-button" data-action="font-color-swatch" data-color="#2E86C1"
                  style="color:#2E86C1" title="#2E86C1" aria-label="#2E86C1"></button>
                <button type="button" class="color-swatch-button" data-action="font-color-swatch" data-color="#1F618D"
                  style="color:#1F618D" title="#1F618D" aria-label="#1F618D"></button>
                <button type="button" class="color-swatch-button" data-action="font-color-swatch" data-color="#17A589"
                  style="color:#17A589" title="#17A589" aria-label="#17A589"></button>
                <button type="button" class="color-swatch-button" data-action="font-color-swatch" data-color="#7D3C98"
                  style="color:#7D3C98" title="#7D3C98" aria-label="#7D3C98"></button>
              </div>
            </div>
          </div>
          <div class="font-submenu" data-submenu="font-family">
            <button type="button" class="font-submenu-trigger" aria-haspopup="true" aria-expanded="false"
              title="フォントファミリー"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor"><text x="4" y="20"
                  font-family="serif" font-size="20">A</text></svg></button>
            <div class="font-submenu-panel" role="menu">
              <div class="font-family-list">
                <button type="button" class="font-family-option" data-action="font-family"
                  data-family="'Yu Gothic', '游ゴシック体', sans-serif">游ゴシック / Yu Gothic</button>
                <button type="button" class="font-family-option" data-action="font-family"
                  data-family="'Yu Mincho', '游明朝', serif">游明朝 / Yu Mincho</button>
                <button type="button" class="font-family-option" data-action="font-family"
                  data-family="'Meiryo', 'メイリオ', sans-serif">メイリオ / Meiryo</button>
                <button type="button" class="font-family-option" data-action="font-family"
                  data-family="'Hiragino Kaku Gothic ProN', 'ヒラギノ角ゴ ProN', sans-serif">Hiragino Sans / ヒラギノ角ゴ</button>
                <button type="button" class="font-family-option" data-action="font-family"
                  data-family="'Hiragino Mincho ProN', 'ヒラギノ明朝 ProN', serif">Hiragino Mincho / ヒラギノ明朝</button>
                <button type="button" class="font-family-option" data-action="font-family"
                  data-family="'Noto Sans JP', sans-serif">Noto Sans JP</button>
                <button type="button" class="font-family-option" data-action="font-family"
                  data-family="'Noto Serif JP', serif">Noto Serif JP</button>
                <button type="button" class="font-family-option" data-action="font-family"
                  data-family="'Arial', sans-serif">Arial</button>
                <button type="button" class="font-family-option" data-action="font-family"
                  data-family="'Times New Roman', serif">Times New Roman</button>
                <button type="button" class="font-family-option" data-action="font-family"
                  data-family="'Courier New', monospace">Courier New</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="paragraph-chooser" id="paragraph-chooser">
        <button type="button" class="paragraph-trigger" aria-haspopup="true" aria-expanded="false">段落スタイル ▾</button>
        <div class="paragraph-panel" role="menu" aria-label="段落スタイル">
          <div class="paragraph-submenu" data-submenu="align">
            <button type="button" class="paragraph-submenu-trigger" aria-haspopup="true" aria-expanded="false"
              title="配置"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                stroke-width="2">
                <line x1="4" y1="6" x2="20" y2="6" />
                <line x1="4" y1="12" x2="14" y2="12" />
                <line x1="4" y1="18" x2="20" y2="18" />
              </svg></button>
            <div class="paragraph-submenu-panel" role="menu">
              <div class="align-buttons">
                <button type="button" class="align-icon-button" data-action="align-left" title="左揃え"
                  aria-label="左揃え">左</button>
                <button type="button" class="align-icon-button" data-action="align-center" title="中央揃え"
                  aria-label="中央揃え">中</button>
                <button type="button" class="align-icon-button" data-action="align-right" title="右揃え"
                  aria-label="右揃え">右</button>
              </div>
            </div>
          </div>
          <div class="paragraph-submenu" data-submenu="spacing">
            <button type="button" class="paragraph-submenu-trigger" aria-haspopup="true" aria-expanded="false"
              title="段落下の余白"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                stroke-width="2">
                <path d="M4 6h16M4 18h16M12 9v6M9 12l3 3 3-3" />
              </svg></button>
            <div class="paragraph-submenu-panel" role="menu">
              <div class="spacing-buttons">
                <button type="button" class="spacing-button" data-action="paragraph-spacing" data-size="xs"
                  title="XS">XS</button>
                <button type="button" class="spacing-button" data-action="paragraph-spacing" data-size="s"
                  title="S">S</button>
                <button type="button" class="spacing-button" data-action="paragraph-spacing" data-size="m"
                  title="M">M</button>
                <button type="button" class="spacing-button" data-action="paragraph-spacing" data-size="l"
                  title="L">L</button>
                <button type="button" class="spacing-button" data-action="paragraph-spacing" data-size="xl"
                  title="XL">XL</button>
              </div>
            </div>
          </div>
          <div class="paragraph-submenu" data-submenu="line-height">
            <button type="button" class="paragraph-submenu-trigger" aria-haspopup="true" aria-expanded="false"
              title="行間"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                stroke-width="2">
                <path d="M6 5h14M6 12h14M6 19h14M2 5v14" />
              </svg></button>
            <div class="paragraph-submenu-panel" role="menu">
              <div class="spacing-buttons">
                <button type="button" class="spacing-button" data-action="line-height" data-size="s"
                  title="S">S</button>
                <button type="button" class="spacing-button" data-action="line-height" data-size="m"
                  title="M">M</button>
                <button type="button" class="spacing-button" data-action="line-height" data-size="l"
                  title="L">L</button>
              </div>
            </div>
          </div>
          <div class="paragraph-submenu" data-submenu="indent">
            <button type="button" class="paragraph-submenu-trigger" aria-haspopup="true" aria-expanded="false"
              title="インデント"><svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor"
                stroke-width="2">
                <path d="M4 6h16M4 12h16M4 18h16M8 12l4-4v8z" />
              </svg></button>
            <div class="paragraph-submenu-panel" role="menu">
              <div class="spacing-buttons">
                <button type="button" class="spacing-button" data-action="indent">＋</button>
                <button type="button" class="spacing-button" data-action="outdent">ー</button>
              </div>
              <div class="indent-option">
                <label>
                  <input type="checkbox" data-action="hanging-indent" disabled> ぶら下げ
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <button type="button" data-action="add-page">+Page</button>
      <button type="button" data-action="remove-page">-Page</button>
      <div style="flex-grow: 1;"></div>
      <input type="text" id="toolbar-jump-input" placeholder="(例：1-1)〇-〇へジャンプ" title="Enter 'p1-1' or '1-1' to jump"
        style="width: 160px;">
    </div>
    <input type="file" id="open-file-input" accept=".html,text/html" style="display:none" />
    <div id="workspace">
      <div id="page-navigator"></div>
      <div id="sidebar-toggle-overlay">
        <button id="sidebar-toggle-btn">サムネイル ON/OFF</button>
      </div>
      <div id="pages-container">
        <!-- 初期ページ -->
        <section class="page" data-page="1">
          <div class="page-inner" contenteditable="true">
            <p><br></p>
          </div>
        </section>
        <div id="ai-image-index" style="display:none"></div>
      </div>
    </div>




    <div id="image-context-menu" class="image-context-menu" role="menu">
      <div class="image-context-dropdown">
        <button type="button" class="image-context-trigger" aria-haspopup="menu" aria-expanded="false">サイズ</button>
        <div class="image-context-submenu" role="menu">
          <button type="button" data-action="image-size" data-size="xs">XS</button>
          <button type="button" data-action="image-size" data-size="s">S</button>
          <button type="button" data-action="image-size" data-size="m">M</button>
          <button type="button" data-action="image-size" data-size="l">L</button>
          <button type="button" data-action="image-size" data-size="xl">XL</button>
        </div>
      </div>
      <button type="button" data-action="image-border">枠線</button>
      <button type="button" data-action="image-title">タイトル</button>
      <button type="button" data-action="image-caption">キャプション</button>
      <button type="button" data-action="image-tag">タグ</button>
    </div>

    <dialog id="paragraph-jump-dialog">
      <form method="dialog" class="dialog-form">
        <p>段落へジャンプ</p>
        <label>
          段落番号 (例: 1-1):
          <input type="text" id="paragraph-jump-input" placeholder="p-n">
        </label>
        <div class="dialog-actions" style="display:none"></div>
      </form>
    </dialog>

    <dialog id="image-title-dialog" aria-labelledby="image-title-dialog-label">
      <form method="dialog" aria-describedby="image-title-dialog-description">
        <p id="image-title-dialog-label">画像タイトル</p>
        <label for="image-title-input">
          タイトル
          <input type="text" id="image-title-input" name="image-title-input" placeholder="タイトルを入力" />
        </label>
        <fieldset id="image-title-dialog-description">
          <legend>フォントサイズ</legend>
          <label>
            <input type="radio" name="image-title-font-size" value="default" checked />
            標準
          </label>
          <label>
            <input type="radio" name="image-title-font-size" value="mini" />
            小サイズ (mini-p)
          </label>
        </fieldset>
        <div class="dialog-actions">
          <button type="button" data-action="cancel-image-title">キャンセル</button>
          <button type="button" data-action="apply-image-title">適用</button>
        </div>
      </form>
    </dialog>



    <script type="module">
      import { initEditor } from "./dist/main.js";
      initEditor();
    </script>


</body>

</html>