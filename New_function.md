# 新機能追加

## Antigravity下でのリアルタイム同期AI編集

*設計思想*

・このv2エディタをネットで公開したとき、ユーザーが自分のAntigravity等のファイル編集AIエージェント利用下で、このエディタでリアルタイム同期AI編集ができるようにする。

**コマンドによる編集**
・まず、疑似API的コマンドロジックを組む。
・エディタは、filesystemAPIを使って、開いているHTMLファイルがローカルで編集されたことを検知する。
・エディタは、変更を確認し、ファイルを上書き保存後、HTMLファイルの下のコマンドエリアに、特定のコマンドが書かれていた場合、そのコマンドを実行する。
・コマンドは、エディタ上でテキスト編集を実行できる。
・コマンド実行後にコマンドエリアは空に戻す。
・コマンドによって変更された箇所は、わかりやすく色付けする。
・コマンド実行後、ユーザーは、変更を確認し、変更が気に入らない場合は、UIで、コマンド実行前の保存状態に戻すことができる。

**ユーザー側のワークフロー**
・ユーザーは、エディタから出力したHTMLファイルを自分のAIエージェントに読み込ませる。
・ユーザーはAIエージェントに読み込ませているファイルをエディタで開く。
・HTMLには、AIエージェント向けのコマンドの使い方があらかじめ書かれている。
・ファイル編集AIエージェントは、ユーザーの要求に沿うようなコマンドを考え、HTMLファイル中のコマンドエリアにコマンドを書く。

*スタック*
rules.mdに準拠。

*注意点*
rules.mdに厳密に従うこと。